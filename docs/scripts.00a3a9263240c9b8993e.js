let room;console.log(Twilio);let Video=Twilio.Video;async function twilioVideo(){return await new Promise((t,i)=>{Video.createLocalTracks({audio:!0,video:{width:1215}}).then(i=>{t(i)}).catch(t=>{i(t)})})}async function joinRoom(t){startVideoChat(await t.room,await t.token)}async function startVideoChat(t,i){var e=document.getElementById("room");console.log(e),room=await Video.connect(i,{room:t,video:{width:1215},audio:!1}),participantConnected(room.localParticipant),room.participants.forEach(participantConnected),room.on("participantConnected",participantConnected),room.on("participantDisconnected",participantDisconnected),window.addEventListener("beforeunload",tidyUp(room)),window.addEventListener("pagehide",tidyUp(room))}function participantConnected(t){console.log("Participant connected",t);let i=document.getElementById("participants");const e=document.createElement("div");e.setAttribute("id",t.sid),i.appendChild(e),t.tracks.forEach(i=>{trackPublished(i,t)}),t.on("trackPublished",trackPublished)}function participantDisconnected(t){t.removeAllListeners();document.getElementById(t.sid).remove()}function trackPublished(t,i){const e=document.getElementById(i.sid),o=t=>{e.appendChild(t.attach())};t.track&&o(t.track),t.on("subscribed",o)}function tidyUp(t){return function(i){i.persisted||t&&(t.disconnect(),t=null)}}async function chatClientCreate(t){console.log(Twilio);let i=await Twilio.Chat.Client.create("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImN0eSI6InR3aWxpby1mcGE7dj0xIn0.eyJpc3MiOiJTS2VmNTU0ZjBhMDhkYzU5YmNmNDA0ZmZlODRiY2M2YWYzIiwiZXhwIjoxNjM2MDg0NTM3LCJqdGkiOiJTS2VmNTU0ZjBhMDhkYzU5YmNmNDA0ZmZlODRiY2M2YWYzLTE2MzYwODA5MzciLCJzdWIiOiJBQzE3NDg5YjdjOTVmMmNjNWYzZTMyNTY5OWQ4MmVlNGUyIiwiZ3JhbnRzIjp7ImlkZW50aXR5IjoiZ25hcmF5YW5hQGdtYWlsLmNvbSIsImNoYXQiOnsic2VydmljZV9zaWQiOiJhYmMtMTIzLTM0NS01Njc3In19fQ.OmPmIh4A60GpF1E-3hFVvRd0G1WPDk5YekZoteQIchg");console.log(i)}